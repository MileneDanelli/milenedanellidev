zerops:
  - setup: nextjs
    build:
      base: nodejs@22
      buildCommands:
        - npm install --frozen-lockfile
        - npm run build
      deployFiles:
        - .next
        - public
        - package.json
        - package-lock.json
        - next.config.ts
      cache:
        - node_modules
        - package-lock.json
    run:
      base: nodejs@22
      envVariables:
        NODE_ENV: production
        PORT: "3000"
      initCommands:
        - npm install --frozen-lockfile --production=false
      start: npm start
      ports:
        - port: 3000
          httpSupport: true